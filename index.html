<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">

        <title>Moving to a Service Oriented Architecture from tightly coupled applicationsi - Xavier Briand</title>

        <meta name="description" content="A framework for easily creating beautiful presentations using HTML">
        <meta name="author" content="Xavier Brians <xavierbriand@gmail.com>">
        <meta name="apple-mobile-web-app-capable" content="yes" />
        <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
        <link rel="stylesheet" href="css/reveal.min.css">
        <link rel="stylesheet" href="css/theme/default.css" id="theme">
        <link rel="stylesheet" href="lib/css/zenburn.css"><!-- For syntax highlighting -->
        <script>
            document.write( '<link rel="stylesheet" href="css/print/' + ( window.location.search.match( /print-pdf/gi ) ? 'pdf' : 'paper' ) + '.css" type="text/css" media="print">' );
        </script>
        <!--[if lt IE 9]>
            <script src="lib/js/html5shiv.js"></script>
        <![endif]-->
    </head>

    <body>
        <div class="reveal">
            <div class="slides">
                <section>
                    <img src="images/me.png" class="round big" alt=""/>
                    <h3>Xavier B<span class="fragment highlight-red">r</span>iand</h3>
                    <p>Senior Web Application Developer</p>
                    <p><small>ExperiencePoint Inc</small></p>
                    <p class="fragment"><small class="quiet">(please excuse my accent)</small></p>
                    <aside class="notes">
                        SensioLabs trainings/coaching
                    </aside>
                </section>

                <section data-background="#000000">
                    <section data-transition="linear">
                        <img src="images/moustache.jpg" class="nude" alt=""/>
                        <aside class="notes">
                            not only for the amazing styles
                            <br/>
                            not only a Hypterish trend
                            <br/>
                            Movember is a month long global event in November where men grow
                            moustaches to raise awareness and funds for men's health issues.
                        </aside>
                    </section>
                    <section data-transition="linear">
                        <h2><a href="http://mobro.co/xavierbriand">mobro.co/xavierbriand</a></h2>
                    </section>
                </section>

                <section data-transition="none">
                    <h3>Moving to a<br/>Service Oriented Architecture<br/>from tightly coupled<br/>applications</h3>
                    <aside class="notes">
                        kitten free presentation
                    </aside>
                </section>

                <section data-transition="fade">
                    <h2>ExperiencePoint</h2>
                    <p>
                        "The best way to learn is to experience."
                    </p>
                    <aside class="notes">
                        21 employees
                        <br/>
                        academics and corporations
                        <br/>
                        Change Management
                        <br/>
                        Innovation (Design Thinking)
                    </aside>
                </section>

                <section data-transition="none">
                    <section>
                        <h2>Business</h2>
                        <p><img src="images/business.jpg" alt=""/></p>
                        <p>(1+½)+(4+3) simulations</p>
                        <aside class="notes">
                            Frontend App
                            <br/>
                            Backend App
                            <br/>
                            (simulation + Flash app) x5
                            <br/>
                            Low load, high available (2lb fallback + 3 server + 2 db server fallback + backup infra)
                        </aside>
                    </section>
                    <section>
                        <img src="images/gateway.png" alt=""/>
                    </section>
                    <section>
                        <img src="images/gt.png" alt=""/>
                    </section>
                </section>

                <section data-transition="fade">
                    <h2>Previous Architecture</h2>
                    <p><img src="images/old-arch.jpg" alt=""/></p>
                    <aside class="notes">
                        Old: All symfony1.0 app (created in 2005, end of support jan 2010 (symfony1.4 november 2012))
                        <br/>
                        Physical env = sf env
                        <br/>
                        Shared models and plugins without dependency management
                        <br/>
                        Quality nightmare, deployed form dev env "it works for me"
                    </aside>
                </section>

                <section data-background="#F2DEDE" class="red">
                    <h2>Problems</h2>
                    <p class="fragment">tightly coupled applications</p>
                    <p class="fragment">no dependency management</p>
                    <p class="fragment">no tests</p>
                    <p class="fragment">deprecated technologies</p>
                    <p class="fragment">1 dev symptoms</p>
                    <p class="fragment">2 environments</p>
                    <p class="fragment">SVN</p>

                    <aside class="notes">
                        manage the existant while migrating, no big switch to convert everything
                        <br/>
                        can simply deploy one app if model changed
                        <br/>
                        No way to know which application use which part of the other application
                        <br/>
                        Physical environment (platform) == framework environment
                        <br/>
                        SVN, hard to branch, hard to merge => dev don’t branch
                        <br/>
                        Flash AMF (support issues), hard to debug; symfony1.0, no php 5.4
                    </aside>
                </section>

                <section>
                    <h2>ExperienceChange Model</h2>
                    <p><img src="images/ec-model.jpg" alt=""/></p>

                    <aside class="notes">
                        internal culture teaches use this
                        <br/>
                        envisage
                        <br/>
                        Enlist
                        <br/>
                        Communicate
                        <br/>
                        Act
                        <br/>
                        Consolidate
                    </aside>
                </section>

                <section data-transition="fade">
                    <h2>Meet the dev team</h2>
                    <div class="trombi">
                        <p class="fragment roll-in">
                            <img src="images/david.jpg" width="150" class="round" alt=""/>
                        </p>
                        <p class="fragment roll-in">
                            <img src="images/craig.png" width="150" class="round"  alt=""/>
                            <img src="images/ryan.png" width="150" class="round"  alt=""/>
                        </p>
                        <p class="fragment roll-in">
                            <img src="images/brian.jpg" width="150" class="round"  alt=""/>
                            <img src="images/me.png" width="150" class="round"  alt=""/>
                            <img src="images/paul.jpg" width="150" class="round" alt=""/>
                        </p>
                    </div>
                    <aside class="notes">
                        + 2 designers
                        <br />
                        Holy Trinity
                    </aside>
                </section>

                <section data-transition="fade">
                    <h3>Step 1</h3>
                    <h2>Reset ⟲</h2>
                    <p class="fragment">
                        Goal: efficient dev environment
                    </p>
                    <div class="fragment">
                        <p>VM</p>
                        <p>Modern SCM</p>
                        <p>Modern Frameworks</p>
                        <p>Tasks automation</p>
                    </div>

                    <aside class="notes">
                        VM: FreeBSD jails (can be cloned, saved, restored) => consistent dev env while keeping dev in different env. Can achieve prod = dev
                        <br/>
                        Git + Coding tools (vim)
                        <br/>
                        Sf2 Framework (conventiosn, best practices, libs), Backbone, Angular
                        <br/>
                        Physical env != Sf env
                        <br/>
                        Tests
                        <br/>
                        Makefile, PHP CI, Static code analysis
                    </aside>
                </section>

                <section data-transition="fade">
                    <section>
                        <h3>Problem</h3>
                        <h2>Dependency management</h2>
                        <div class="fragment">
                            <p><img src="images/composer.png" class="nude" alt=""/></p>
                            <p><small class="quiet">logo: WizardCat</small></p>
                        </div>
                        <p class="fragment monospace">$ make build</p>

                        <aside class="notes">
                            Composer</li>
                            As easy as adding a package.json file<br/>
                            as easy as: composer install<br/>
                            Fetch code source from outside (scscmgnostic)<br/>
                            Set dependencies on your php version and packages<br/>
                            Satis for private repository
                        </aside>
                    </section>
                    <section>
                        <pre><code data-trim>
{
    "name"     : "ep/ec",
    "license"  : "proprietary",
    "autoload" : {
        "psr-0": { "": "src/" }
    },
    "require": {
        "php"                   : ">=5.3.3",
        "symfony/symfony"       : "~2.4",
        "doctrine/orm"          : "~2.2,>=2.2.3",
        "ep/backend-sdk-bundle" : "dev-master",
        "ep/old-stuff"          : "dev-trunk"
    },
    "require-dev": {
        "phpunit/phpunit": "3.7.*"
    }
}
                        </code></pre>
                    </section>
                    <section>
                        <pre><code data-trim>
$ php composer.phar
   ______
  / ____/___  ____ ___  ____  ____  ________  _____
 / /   / __ \/ __ `__ \/ __ \/ __ \/ ___/ _ \/ ___/
/ /___/ /_/ / / / / / / /_/ / /_/ (__  )  __/ /
\____/\____/_/ /_/ /_/ .___/\____/____/\___/_/
                    /_/

Available commands:
  install          Installs the project dependencies from the composer.lock file if present, or falls back on the composer.json.
  require          Adds required packages to your composer.json and installs them
  search           Search for packages
  self-update      Updates composer.phar to the latest version.
  status           Show a list of locally modified packages
  update           Updates your dependencies to the latest version according to composer.json, and updates the composer.lock file.
  validate         Validates a composer.json
                        </code></pre>
                    </section>
                </section>

                <section data-transition="fade">
                    <h3>Problem</h3>
                    <h2>App config management</h2>
                    <p class="fragment monospace">composer (Platform packages)</p>
                    <p class="fragment monospace">incenteev/composer-parameter-handler</p>
                    <p class="fragment monospace">$ make build</p>

                    <aside class="notes">
                        Application should be unaware of physical environment details, but should provide requirements.
                        <br/>
                        <br/>
                        composer help to define those requirements
                        <br/>
                        Dependency injection container and bundle extension make the work pretty easy for sf2
                        <br/>
                        Use those good practices for sf1
                    </aside>
                </section>

                <section data-transition="fade">
                    <h3>Problem</h3>
                    <h2>QA</h2>
                    <div class="fragment">
                        <p><img src="images/jenkins.png" class="" alt=""/></p>
                        +
                        <p>
                            <a href="http://jenkins-php.org/">jenkins-php.org</a>
                        </p>
                    </div>
                    <p class="fragment monospace">$ make prepare analysis</p>

                    <aside class="notes">
                        check style
                        <br/>
                        complexity
                        <br/>
                        duplication
                        <br/>
                        tests + code coverage
                        <br/>
                        trend
                    </aside>
                </section>

                <section>
                    <h3>Step 2</h3>
                    <h2>“Defeat in detail”</h2>
                    <p class="fragment">Divide and gather (DRY)</p>
                    <p class="fragment">Keep things small + KISS</p>
                    <p class="fragment">Design by contract</p>
                    <p class="fragment">Leverage your architecture</p>

                    <aside class="notes">
                        Where there code duplication there is an opportunity to gather this code and create a new module\<br/>
                        Small concern == small responsability => easier to dev/test/deploy<br/>
                        Design by contract Black box, expose interfaces.<br/>
                        Benefits: Easy to manage, defined boundaries, independant<br/>
                        Constraints: interface versioning
                    </aside>
                </section>

                <section data-transition="fade">
                    <h2>Opportunity: GlobalTech</h2>
                    <aside class="notes">
                        From scratch, Sf2 + Flex<br/>
                        Plan to merge every similar product into one application => ExperienceChange<br/>
                        But don’t abstract too soon, build what you need and embrace possibilities
                    </aside>
                </section>

                <section data-transition="fade">
                    <section>
                        <h2>Inside</h2>
                        <p class="fragment">Remove Flash... <span class="fragment">No!  Ok but:</span></p>
                        <h3 class="fragment">Let’s use the best technology<br/>to do the job</h3>
                        <p class="fragment">AMF => plain HTTP via browser</p>
                        <p class="fragment">Business Logic => Backend</p>
                        <p class="fragment">Frontend UI => Flash</p>
                    </section>
                    <section data-transition="fade">
                        <h2>Hypermedia API</h2>
                        <p class="fragment roll-in code">
                            &gt; POST /games/ + content
                            <br/>
                            <br/>
                            &lt; 201 Created
                            <br/>
                            &lt; Location /games/1
                                                </p>
                                                <p class="fragment roll-in code">
                            &gt; GET /games/1
                            <br/>
                            <br/>
                            &lt; 200 Ok
                            <br/>
                            &lt;
                            <br/>
                            &lt; &lt;game&gt;
                            <br/>
                            &lt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;!-- ... --&gt;
                            <br/>
                            &lt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;links rel=”actionX” src=”...”&gt;&lt;/links&gt;
                            <br/>
                            &lt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;links rel=”actionY” src=”...”&gt;&lt;/links&gt;
                            <br/>
                            &lt; &lt;/game&gt;
                        </p>
                        <p class="fragment">
                            <small>
                                David Zuelke "Designing HTTP Interfaces and RESTful Web Services"
                            </small>
                        </p>
                        <aside class="notes">
                            The HATEOAS constraint serves to decouple client and server in a way that allows the server to evolve functionality independently,
                            <br/>
                            browse a collection with previous/next links
                            <br/>
                        </aside>
                    </section>
                </section>

                <section data-transition="fade">
                    <h2>Globally</h2>
                    <p><img src="images/gt-refactoring.jpg" alt=""/></p>
                    <aside class="notes">
                        Delegate session logic
                        <br/>
                        Delegate user logic
                        <br/>
                        Delegate authentication
                        <br/>
                        Focus on simulation logic
                        <br/>
                        Serve everything related to the simulation
                    </aside>
                </section>

                <section data-transition="fade">
                    <h3>Implementation</h3>
                    <h2>Strategy Pattern</h2>
                    <aside class="notes">
                        Old applications need to know when delegate new features: Array of enabled products
                    </aside>
                </section>

                <section data-transition="fade">
                    <h3>Solutions</h3>
                    <h2>OAuth2</h2>
                    <img src="images/oauth.png" alt=""/>
                    <aside class="notes">
                        Shared auth between Frontend app and Auth app
                    </aside>
                </section>

                <section data-transition="fade">
                    <h3>Solutions</h3>
                    <h2>Backend App API</h2>
                    <img src="images/backend-api.png" alt=""/>
                    <aside class="notes">
                        Standalone application
                        <br/>
                        Future Backend App v3
                        <br/>
                        Leverage Doctrine2 mapping to change the model
                    </aside>
                </section>

                <section data-transition="fade">
                    <h3>Solutions</h3>
                    <h2>Product API</h2>
                    <img src="images/product-private-api.png" alt=""/>

                    <aside class="notes">
                        Serve data and reports to Frontend and Backend App
                        <br/>
                        epExperienceChangePlugin
                        <br/>
                        API consumers deal with representation.
                    </aside>
                </section>

                <section data-transition="fade">
                    <h2>The other way around</h2>
                    <img src="images/product-api.jpg" alt=""/>
                    <aside class="notes">
                        Product options: Remove every simulation details from Backend App
                    </aside>
                </section>

                <section>
                    <h3>Step 3</h3>
                    <h2>Consolidate</h2>

                    <p class="fragment">BackendAppSdkBundle</p>
                    <p class="fragment">OAuth2ClientBundle</p>
                    <p class="fragment">ApiBundle</p>
                    <p class="fragment">AssetsBundle</p>

                    <h3 class="fragment">Rinse and repeat...</h3>

                    <aside class="notes">
                        What do you do before starting a new project? refactoring refactoring
                        <br/>
                        extract common feature into bundles
                        <br/>
                        share those bundles accross new apps
                    </aside>
                </section>

                <section>
                    <h3>Step 4</h3>
                    <h2>Plan for the futur</h2>
                    <aside class="notes">
                        wrapping old app into sf2 (session bridge)
                        <br/>
                        divide and gater (again) (old backend app with sf2 app, extract auth layer)
                        <br/>
                        get ride of flash = html5+js (Angular?) more and nore mobile app to train/prepare transition
                        <br/>
                        Pilot cache strategy from client
                    </aside>
                </section>

                <section data-transition="zoom">
                    <h2>Question?</h2>
                    <p class="fragment grow"><a href="http://joind.in/9999">joind.in/9999</a> <small class="quiet">(four 9)</small></p>
                    <br/>
                    <div class="fragment roll-in">
                        <h3>Symfony <img src="images/meetup.png" width="100" class="nude" alt="" /></h3>
                    </div>
                    <br/>
                    <div class="fragment">
                        <h3>We are hiring!</h3>
                        <p><a href="http://www.experiencepoint.com/careers">experiencepoint.com/careers</a></p>
                    </div>

                    <aside class="notes">
                        Symfony Toronto Meetup group
                    </aside>
                </section>
            </div>
        </div>

        <script src="lib/js/head.min.js"></script>
        <script src="js/reveal.min.js"></script>
        <script>
            // Full list of configuration options available here:
            // https://github.com/hakimel/reveal.js#configuration
            Reveal.initialize({
                controls: false,
                progress: true,
                history: true,
                center: true,

                theme: Reveal.getQueryHash().theme || 'ep', // available themes are in /css/theme
                transition: Reveal.getQueryHash().transition || 'linear', // default/cube/page/concave/zoom/linear/fade/none

                // Optional libraries used to extend on reveal.js
                dependencies: [
                    { src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
                    { src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
                    { src: 'plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
                    { src: 'plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
                ]
            });
        </script>
    </body>
</html>
